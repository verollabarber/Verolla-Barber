<!DOCTYPE html>
<html lang="en-US">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Verolla Barber ‚Äì Booking</title>

<style>
body {
  margin: 0;
  background: #000;
  color: #fff;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  display: flex;
  justify-content: center;
}
.app {
  width: 100%;
  max-width: 420px;
  padding: 16px;
}
.card {
  background: #111;
  border-radius: 14px;
  padding: 16px;
}
h2 {
  text-align: center;
  margin-bottom: 12px;
}
.days, .times {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 8px;
}
.days button, .times button {
  padding: 10px;
  border-radius: 10px;
  border: none;
  background: #1a1a1a;
  color: #fff;
}
.days button.selected,
.times button.selected {
  background: #5ddcff;
  color: #000;
}
.times button:disabled {
  opacity: 0.3;
}
input {
  width: 100%;
  padding: 10px;
  border-radius: 10px;
  border: none;
  margin-bottom: 8px;
}
.confirm {
  width: 100%;
  padding: 14px;
  border-radius: 12px;
  border: none;
  background: #5ddcff;
  color: #000;
  font-size: 16px;
}
</style>
</head>

<body>
<div class="app">
  <div class="card">
    <h2>Select a date</h2>
    <div class="days" id="days"></div>

    <h2 style="margin-top:16px">Select time</h2>
    <div class="times" id="times"></div>

    <h2 style="margin-top:16px">Your info</h2>
    <input id="name" placeholder="Name">
    <input id="phone" placeholder="Phone">

    <button class="confirm" onclick="sendBooking()">Confirm booking</button>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
<script>
emailjs.init("SUA_PUBLIC_KEY_AQUI");
</script>

<script>
// üîí HOR√ÅRIOS J√Å AGENDADOS
const bookedSlots = {
  "2026-01-20": ["15:30", "16:30"],
  "2026-01-21": ["18:30"]
};

const daysEl = document.getElementById("days");
const timesEl = document.getElementById("times");

let selectedDate = null;
let selectedTime = null;

// üìÖ Criar pr√≥ximos 14 dias (bloqueia datas passadas)
const today = new Date();
for (let i = 0; i < 14; i++) {
  const d = new Date();
  d.setDate(today.getDate() + i);

  const btn = document.createElement("button");
  btn.innerText = d.getDate();
  btn.onclick = () => selectDay(d, btn);

  daysEl.appendChild(btn);
}

function selectDay(date, btn) {
  document.querySelectorAll(".days button").forEach(b => b.classList.remove("selected"));
  btn.classList.add("selected");

  selectedDate = date.toISOString().split("T")[0];
  renderTimes(date);
}

// ‚è∞ Hor√°rios por dia da semana
function renderTimes(date) {
  timesEl.innerHTML = "";
  selectedTime = null;

  const day = date.getDay(); // 0 = domingo
  let times = [];

  if (day === 0 || day === 6) {
    // S√°bado / Domingo
    times = generateTimes(10, 21);
  } else {
    // Segunda a Sexta
    times = generateTimes(15, 21);
  }

  times.forEach(t => {
    const btn = document.createElement("button");
    btn.innerText = t.display;

    if (
      bookedSlots[selectedDate] &&
      bookedSlots[selectedDate].includes(t.value)
    ) {
      btn.disabled = true;
    }

    btn.onclick = () => {
      document.querySelectorAll(".times button").forEach(b => b.classList.remove("selected"));
      btn.classList.add("selected");
      selectedTime = t.display;
    };

    timesEl.appendChild(btn);
  });
}

// üß† Gera hor√°rios
function generateTimes(startHour, endHour) {
  const arr = [];
  for (let h = startHour; h <= endHour; h++) {
    arr.push(formatTime(h, 30));
  }
  return arr;
}

function formatTime(hour24, min) {
  const period = hour24 >= 12 ? "PM" : "AM";
  let hour12 = hour24 % 12 || 12;
  return {
    display: `${hour12}:${min} ${period}`,
    value: `${hour24.toString().padStart(2,"0")}:${min}`
  };
}

// üìß Envio EmailJS
function sendBooking() {
  if (!selectedDate || !selectedTime) {
    alert("Please select date and time");
    return;
  }

  emailjs.send("service_ucr7o0r", "template_nr857m8", {
    name: document.getElementById("name").value,
    phone: document.getElementById("phone").value,
    day: selectedDate,
    time: selectedTime
  }).then(() => {
    alert("Booking sent successfully!");
  }, err => {
    alert("Error sending booking");
  });
}
</script>
</body>
</html>
